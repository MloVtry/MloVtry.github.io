---
layout: post
title: Luogu&#x8403;&#x9999;&#x62B1;&#x897F;&#x74DC;
category : Intro 
tags : [tag1]
---

## &#x8403;&#x9999;&#x62B1;&#x897F;&#x74DC;

## &#x9898;&#x76EE;&#x63CF;&#x8FF0;

&#x8403;&#x9999;&#x6240;&#x5904;&#x7684;&#x73AF;&#x5883;&#x88AB;&#x7B80;&#x5316;&#x4E3A;&#x4E00;&#x4E2A;&#x957F;&#x4E3A;h&#xFF0C;&#x5BBD;&#x4E3A;w&#x7684;&#x7F51;&#x683C;&#x5E73;&#x9762;&#x3002;X&#x5750;&#x6807;&#x8303;&#x56F4;&#x4E3A;[1,w]&#xFF0C;y&#x5750;&#x6807;&#x8303;&#x56F4;&#x4E3A;[1,h]&#x3002;

&#x5979;&#x521D;&#x59CB;&#xFF08;&#x7B2C;1&#x4E2A;&#x65F6;&#x523B;&#xFF09;&#x7AD9;&#x5728;&#x5750;&#x6807;&#x4E3A;sx,sy&#x7684;&#x65B9;&#x683C;&#x3002;

&#x897F;&#x74DC;&#x53EF;&#x80FD;&#x5728;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x65B9;&#x683C;&#x51FA;&#x73B0;&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;&#x65F6;&#x95F4;&#x5355;&#x4F4D;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x80FD;&#x5411;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x65B9;&#x5411;&#x79FB;&#x52A8;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x9759;&#x6B62;&#x4E0D;&#x52A8;&#x3002;&#x897F;&#x74DC;&#x7684;&#x4F4D;&#x7F6E;&#x548C;&#x79FB;&#x52A8;&#x7684;&#x8F68;&#x8FF9;&#x662F;&#x5DF2;&#x77E5;&#x7684;&#x3002;&#x897F;&#x74DC;&#x7684;&#x603B;&#x6570;&#x4E3A;n&#x4E2A;&#xFF0C;&#x4F46;&#x53EA;&#x6709;m&#x4E2A;&#x897F;&#x74DC;&#x53EF;&#x4EE5;&#x88AB;&#x8403;&#x9999;&#x62B1;&#x8D70;&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x4ED6;&#x90FD;&#x592A;&#x5927;&#x4E86;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x7838;&#x4F24;&#x5979;&#x3002;

&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x4F1A;&#x6301;&#x7EED;T&#x4E2A;&#x65F6;&#x523B;&#x3002;&#x8403;&#x9999;&#x5E0C;&#x671B;&#x53EF;&#x4EE5;&#x62B1;&#x8D70;&#x5168;&#x90E8;&#x7684;m&#x4E2A;&#x897F;&#x74DC;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x907F;&#x514D;&#x4E0E;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8FC7;&#x5927;&#x7684;&#x897F;&#x74DC;&#x5904;&#x5728;&#x540C;&#x4E00;&#x4F4D;&#x7F6E;&#x3002;&#x62B1;&#x8D70;&#x7684;&#x65B9;&#x5F0F;&#x4E3A;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x523B;&#xFF0C;&#x4E0E;&#x8BE5;&#x897F;&#x74DC;&#x5904;&#x4E8E;&#x540C;&#x4E00;&#x4F4D;&#x7F6E;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x7531;&#x4E8E;&#x8403;&#x9999;&#x4E0D;&#x613F;&#x8017;&#x8D39;&#x8FC7;&#x591A;&#x4F53;&#x529B;&#x5230;&#x5904;&#x4E71;&#x8DD1;&#xFF0C;&#x5979;&#x6BCF;&#x4E2A;&#x65F6;&#x523B;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x9759;&#x6B62;&#x4E0D;&#x52A8;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x79FB;&#x52A8;&#x5230;&#x76F8;&#x90BB;&#x7684;&#x56DB;&#x4E2A;&#x683C;&#x5B50;&#x4E4B;&#x4E00;&#xFF0C;&#x53EA;&#x8981;&#x4E0D;&#x8D8A;&#x51FA;&#x73AF;&#x5883;&#x8FB9;&#x754C;&#x3002;&#x5982;&#x679C;&#x9009;&#x62E9;&#x79FB;&#x52A8;&#x5230;&#x76F8;&#x90BB;&#x683C;&#x5B50;&#xFF0C;&#x5219;&#x7B97;&#x4F5C;&#x79FB;&#x52A8;&#x4E86;&#x4E00;&#x6B21;&#x3002;(&#x7B2C;1&#x4E2A;&#x65F6;&#x523B;&#x8403;&#x9999;&#x521A;&#x7AD9;&#x5B9A;&#xFF0C;&#x65E0;&#x6CD5;&#x79FB;&#x52A8;)

&#x5728;&#x6BCF;&#x4E2A;&#x65F6;&#x523B;&#xFF0C;&#x5982;&#x679C;&#x8403;&#x9999;&#x9009;&#x62E9;&#x79FB;&#x52A8;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x8403;&#x9999;&#x4E0E;&#x897F;&#x74DC;&#x540C;&#x65F6;&#x4ECE;&#x539F;&#x6765;&#x7684;&#x4F4D;&#x7F6E;&#x79FB;&#x5230;&#x4E86;&#x65B0;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6CA1;&#x6709;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x3002;

&#x8403;&#x9999;&#x60F3;&#x8981;&#x77E5;&#x9053;&#xFF0C;&#x4E0D;&#x88AB;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5927;&#x897F;&#x74DC;&#x7838;&#x4E2D;&#xFF0C;&#x5E76;&#x5F97;&#x5230;&#x6240;&#x6709;&#x7684;m&#x4E2A;&#x5C0F;&#x897F;&#x74DC;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6700;&#x5C11;&#x9700;&#x8981;&#x79FB;&#x52A8;&#x591A;&#x5C11;&#x6B21;&#x3002;

## &#x8F93;&#x5165;&#x8F93;&#x51FA;&#x683C;&#x5F0F;

&#x8F93;&#x5165;&#x683C;&#x5F0F;&#xFF1A;
&#x7B2C;&#x4E00;&#x884C;&#x4E94;&#x4E2A;&#x6574;&#x6570;h,w,T,sx,sy&#xFF0C;&#x542B;&#x4E49;&#x89C1;&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#x3002;

&#x7B2C;&#x4E8C;&#x884C;&#x4E24;&#x4E2A;&#x6574;&#x6570;n,m&#xFF0C;&#x542B;&#x4E49;&#x89C1;&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#x3002;

&#x63A5;&#x4E0B;&#x6765;n&#x6BB5;&#x6570;&#x636E;&#xFF0C;&#x6BCF;&#x4E00;&#x6BB5;&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E2A;&#x897F;&#x74DC;&#x7684;&#x51FA;&#x73B0;&#x4F4D;&#x7F6E;&#xFF0C;&#x65F6;&#x95F4;&#xFF0C;&#x79FB;&#x52A8;&#x65B9;&#x5F0F;&#xFF0C;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x88AB;&#x62B1;&#x8D70;&#x7B49;&#x5185;&#x5BB9;&#xFF0C;&#x5177;&#x4F53;&#x5982;&#x4E0B;:

&#x9996;&#x5148;&#x4E00;&#x884C;&#xFF0C;&#x4E24;&#x4E2A;&#x6574;&#x6570;t1,t2&#xFF0C;&#x8868;&#x793A;&#x897F;&#x74DC;&#x5728;t1&#x65F6;&#x523B;&#x51FA;&#x73B0;&#xFF0C; t2&#x65F6;&#x523B;&#x6D88;&#x5931;&#x3002;&#x82E5;t2=T+1,&#x8868;&#x793A;&#x897F;&#x74DC;&#x5728;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x65F6;&#x523B;&#x4E5F;&#x4E0D;&#x6D88;&#x5931;&#x3002;&#x4FDD;&#x8BC1;&#x897F;&#x74DC;&#x81F3;&#x5C11;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x65F6;&#x523B;&#x3002;

&#x63A5;&#x4E0B;&#x6765;&#x4E00;&#x884C;&#x4E00;&#x4E2A;&#x6574;&#x6570;a,&#x53EA;&#x80FD;&#x4E3A;0&#x6216;1,0&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x897F;&#x74DC;&#x9700;&#x8981;&#x907F;&#x5F00;&#xFF0C;1&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x897F;&#x74DC;&#x9700;&#x8981;&#x62B1;&#x8D70;&#x3002;&#x6570;&#x636E;&#x4FDD;&#x8BC1;&#x9700;&#x8981;&#x62B1;&#x8D70;&#x7684;&#x897F;&#x74DC;&#x6070;&#x597D;&#x6709;m&#x4E2A;&#x3002;

&#x63A5;&#x4E0B;&#x6765;t2-t1&#x884C;&#xFF0C;&#x6BCF;&#x4E00;&#x884C;&#x4E24;&#x4E2A;&#x6574;&#x6570;x,y&#xFF0C;&#x987A;&#x5E8F;&#x63CF;&#x8FF0;&#x4E86;&#x4ECE;t1&#x65F6;&#x523B;&#x5230;t2-1&#x65F6;&#x523B;&#xFF0C;&#x8BE5;&#x897F;&#x74DC;&#x7684;&#x5750;&#x6807;&#x3002;&#x897F;&#x74DC;&#x7684;&#x79FB;&#x52A8;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x8FDE;&#x7EED;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x4E00;&#x77AC;&#x95F4;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x9700;&#x8003;&#x8651;&#x8403;&#x9999;&#x662F;&#x5426;&#x7AD9;&#x5728;&#x4E86;&#x79FB;&#x52A8;&#x8DEF;&#x5F84;&#x4E0A;&#x3002;

&#x8F93;&#x51FA;&#x683C;&#x5F0F;&#xFF1A;
&#x5982;&#x679C;&#x8403;&#x9999;&#x5728;&#x6574;&#x4E2A;T&#x65F6;&#x523B;&#x5185;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x88AB;&#x5927;&#x897F;&#x74DC;&#x7838;&#x4E2D;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x6536;&#x96C6;&#x5230;&#x6240;&#x6709;m&#x4E2A;&#x5C0F;&#x897F;&#x74DC;&#xFF0C;&#x8F93;&#x51FA;-1,&#x5426;&#x5219;&#x8F93;&#x51FA;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x8403;&#x9999;&#x9700;&#x8981;&#x79FB;&#x52A8;&#x7684;&#x6700;&#x5C11;&#x6B21;&#x6570;&#x3002;

## &#x601D;&#x8DEF;

&#x72B6;&#x538B;&#xFF0C;&#x56DB;&#x7EF4;spfa&#xFF08;&#x7136;&#x800C;&#x65F6;&#x95F4;&#x90A3;&#x4E00;&#x7EF4;&#x53EF;&#x4EE5;&#x538B;&#x6389;&#xFF09;

&#x8F93;&#x5165;&#x5904;&#x7406;&#x51FA;&#x6BCF;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#x4E0A;&#x7684;&#x5730;&#x56FE;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6709;&#x74DC;&#x5C31;&#x628A;&#x5BF9;&#x5E94;&#x7684;&#x74DC;&#x538B;&#x6210;01&#x4E32;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x4E0D;&#x7BA1;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x969C;&#x788D;&#xFF08;&#x5927;&#x897F;&#x74DC;&#xFF09;&#x5C31;&#x6253;&#x4E2A;&#x6807;&#x8BB0;&#xFF08;&#x6BD4;&#x5982;-1&#xFF09;

&#x7136;&#x540E;&#x6109;&#x60A6;&#x7684;spfa&#x5C31;&#x597D;&#x4E86;

&#x4E00;&#x4E2A;&#x70B9;&#x80FD;&#x591F;&#x8F6C;&#x79FB;&#x5230;&#x4E94;&#x4E2A;&#x70B9;&#xFF0C;&#x4E0A;&#x4E0B;&#x5DE6;&#x53F3;&#x4EE5;&#x53CA;&#x81EA;&#x5DF1;&#xFF0C;&#x5230;&#x81EA;&#x5DF1;&#x662F;&#x4E0D;&#x7528;&#x79FB;&#x52A8;&#xFF08;+&#x8DDD;&#x79BB;&#xFF09;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x65F6;&#x95F4;&#x8981;+1&#xFF08;&#x6240;&#x4EE5;&#x8BF4;&#x65F6;&#x95F4;&#x662F;&#x53EF;&#x4EE5;&#x538B;&#x6389;&#x7684;&#xFF0C;&#x5C31;&#x7B97;&#x538B;&#x4E0D;&#x6389;&#x5F00;&#x4E2A;2&#x7528;&#x5F00;&#x5173;&#x6EDA;&#x52A8;&#x4E5F;&#x5DF2;&#x7ECF;&#x5F88;&#x591F;&#x7528;&#x4E86;&#xFF09;

&#x5224;&#x5B9A;&#x5408;&#x6CD5;&#x9664;&#x4E86;&#x8D8A;&#x754C;&#x8FD8;&#x6709;&#x76EE;&#x6807;&#x70B9;&#x4E0D;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x5927;&#x897F;&#x74DC;

&#x7136;&#x540E;&#x6109;&#x2642;&#x60A6;&#x7684;spfa&#x5C31;&#x597D;&#x4E86;


```cpp 
#include<iostream>
#include<cstdio>
#include<cstring>
#include<queue>
#define inf 336860180
using namespace std;
int dis[7][7][110][2050],init[7][7][110][2050];
int map[7][7][110],h,w,n,m,t,sx,sy;
int js,ans=inf;
int tx[6]=
{
	0,-1,0,1,0,0
};
int ty[6]=
{
	0,0,-1,0,1,0
};
int len[6]=
{
	0,1,1,1,1,0
};
struct node
{
	int x,y,t,sta;
};
queue<node> q;
bool can(int nx,int ny,int nt)
{
	if(nt>t) return false;
	if(nx>w||nx<1) return false;
	if(ny>h||ny<1) return false;
	if(map[nx][ny][nt]==-1) return false;
	return true;
}
void spfa()
{
	memset(dis,20,sizeof(dis));
	int bsta=0;
	if(map[sx][sy][1]!=-1) bsta|=map[sx][sy][1];
	else return;
	dis[sx][sy][1][bsta]=0;
	init[sx][sy][1][bsta]=1;
	q.push((node){sx,sy,1,bsta});
	while(!q.empty())
	{
		node now=q.front();q.pop();
		init[now.x][now.y][now.t][now.sta]=0;
		for(int i=1;i<=5;++i)
		{
			int tsta=now.sta,tox=now.x+tx[i],toy=now.y+ty[i],tt=now.t+1;
			if(can(tox,toy,tt))
			{
				tsta=now.sta|map[tox][toy][tt];
				if(dis[tox][toy][tt][tsta]>dis[now.x][now.y][now.t][now.sta]+len[i])
				{
					dis[tox][toy][tt][tsta]=dis[now.x][now.y][now.t][now.sta]+len[i];
					if(!init[tox][toy][tt][tsta])
					{
						init[tox][toy][tt][tsta]=1;
						q.push((node){tox,toy,tt,tsta});
					}
				}
			}
		}
	}
}
int main()
{
	scanf("%d%d%d%d%d",&h,&w,&t,&sx,&sy);
	scanf("%d%d",&n,&m);
	for(int i=1;i<=n;++i)
	{
		int t1,t2,fl;
		scanf("%d%d%d",&t1,&t2,&fl);
		if(fl==0) 
		{
			for(int j=t1;j<t2;++j)
			{
				int x,y;
				scanf("%d%d",&x,&y);
				map[x][y][j]=-1;
			}
		}
		else
		{
			js++;
			for(int j=t1;j<t2;++j)
			{
				int x,y;
				scanf("%d%d",&x,&y);
				map[x][y][j]=(1<<js);
			}
		}
	}
	int to=0;
	for(int i=1;i<=m;++i) to|=(1<<i);
	spfa();
	for(int i=1;i<=w;++i)
	{
		for(int j=1;j<=h;++j)
		{
		    ans=min(ans,dis[i][j][t][to]);
		}
	}
	if(ans>=inf) ans=-1;
	printf("%d",ans);
	return 0;
}
``` 
